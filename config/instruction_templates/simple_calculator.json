{
  "template_name": "簡単な電卓関数",
  "template_id": "simple_calculator",
  "description": "初回テスト用の簡単な電卓関数テンプレート",
  "version": "1.0",
  "test_purpose": "LLM×SLM ハイブリッドシステムの動作確認",
  
  "template": {
    "function_name": "simple_calculator",
    "requirements": {
      "input": {
        "description": "2つの数値と演算子を受け取る",
        "parameters": [
          {
            "name": "a",
            "type": "float",
            "description": "最初の数値",
            "required": true,
            "example": "10.5"
          },
          {
            "name": "b", 
            "type": "float",
            "description": "2番目の数値",
            "required": true,
            "example": "3.2"
          },
          {
            "name": "operation",
            "type": "str",
            "description": "演算子 (+, -, *, /)",
            "required": true,
            "example": "+"
          }
        ]
      },
      
      "output": {
        "description": "計算結果を辞書形式で返す",
        "type": "dict",
        "format": {
          "result": "計算結果 (float)",
          "operation": "実行された演算 (str)",
          "expression": "式の文字列表現 (str)"
        },
        "example": {
          "result": 13.7,
          "operation": "+",
          "expression": "10.5 + 3.2 = 13.7"
        }
      },
      
      "validation": {
        "input_validation": [
          "a と b が数値であることを確認",
          "operation が有効な演算子 (+, -, *, /) であることを確認",
          "除算の場合、b が 0 でないことを確認"
        ],
        "output_validation": [
          "結果が数値であることを確認",
          "無限大や NaN でないことを確認"
        ]
      },
      
      "error_handling": {
        "expected_errors": [
          {
            "error_type": "ValueError",
            "condition": "無効な演算子が指定された場合",
            "message": "サポートされていない演算子です: {operation}"
          },
          {
            "error_type": "ZeroDivisionError", 
            "condition": "ゼロで除算しようとした場合",
            "message": "ゼロで除算することはできません"
          },
          {
            "error_type": "TypeError",
            "condition": "数値以外が入力された場合",
            "message": "数値を入力してください"
          }
        ],
        "logging": "エラーの詳細をログに記録し、ユーザーに分かりやすいメッセージを表示"
      },
      
      "dependencies": [
        "math (標準ライブラリ)",
        "logging (エラーログ用)"
      ],
      
      "style": {
        "coding_standard": "PEP 8準拠",
        "docstring": "Google Style docstring必須",
        "type_hints": "すべてのパラメータと戻り値に型ヒント追加",
        "comments": "複雑なロジックには日本語コメント"
      },
      
      "test_cases": [
        {
          "name": "加算テスト",
          "input": {"a": 10.5, "b": 3.2, "operation": "+"},
          "expected_output": {
            "result": 13.7,
            "operation": "+", 
            "expression": "10.5 + 3.2 = 13.7"
          },
          "description": "正の数の加算"
        },
        {
          "name": "減算テスト",
          "input": {"a": 10, "b": 3, "operation": "-"},
          "expected_output": {
            "result": 7,
            "operation": "-",
            "expression": "10 - 3 = 7"
          },
          "description": "基本的な減算"
        },
        {
          "name": "乗算テスト",
          "input": {"a": 4.5, "b": 2, "operation": "*"},
          "expected_output": {
            "result": 9.0,
            "operation": "*",
            "expression": "4.5 * 2 = 9.0"
          },
          "description": "小数点を含む乗算"
        },
        {
          "name": "除算テスト",
          "input": {"a": 15, "b": 3, "operation": "/"},
          "expected_output": {
            "result": 5.0,
            "operation": "/",
            "expression": "15 / 3 = 5.0"
          },
          "description": "基本的な除算"
        },
        {
          "name": "ゼロ除算エラーテスト",
          "input": {"a": 10, "b": 0, "operation": "/"},
          "expected_error": "ZeroDivisionError",
          "description": "ゼロで除算した場合のエラーハンドリング"
        },
        {
          "name": "無効な演算子エラーテスト",
          "input": {"a": 5, "b": 3, "operation": "%"},
          "expected_error": "ValueError",
          "description": "サポートされていない演算子の場合"
        }
      ],
      
      "performance": {
        "complexity": "O(1) - 定数時間",
        "memory": "最小限のメモリ使用",
        "benchmarks": "1回の計算は1ms以内で完了すること"
      },
      
      "security": {
        "input_sanitization": "数値以外の入力を適切に拒否",
        "data_protection": "入力データの検証",
        "access_control": "特に制限なし（計算関数のため）"
      }
    }
  },
  
  "usage_instructions": [
    "1. この関数は LLM×SLM システムのテスト用です",
    "2. DeepSeek-Coder によるコード生成を確認",
    "3. Claude による品質レビューを確認", 
    "4. 人間承認ワークフローを実践",
    "5. 生成されたコードの動作テスト"
  ],
  
  "expected_outcome": {
    "function_signature": "def simple_calculator(a: float, b: float, operation: str) -> dict:",
    "approximate_lines": "30-50行程度",
    "key_features": [
      "型ヒント完備",
      "Google Style docstring",
      "包括的なエラーハンドリング",
      "詳細なログ出力",
      "テスト容易性"
    ]
  },
  
  "testing_workflow": {
    "step1": "hybrid_pair.py create simple_calculator --template simple_calculator",
    "step2": "命令書の内容確認・必要に応じて編集",
    "step3": "hybrid_pair.py approve <ID> --approver テスト実行者",
    "step4": "hybrid_pair.py execute <ID>",
    "step5": "生成されたコードの動作確認"
  }
}